<!DOCTYPE node PUBLIC
"-//freedesktop//DTD D-BUS Object Introspection 1.0//EN"
"http://www.freedesktop.org/standards/dbus/1.0/introspect.dtd">

<!--
 Copyright (C) 2011 Red Hat, Inc.

 This library is free software; you can redistribute it and/or
 modify it under the terms of the GNU Lesser General Public
 License as published by the Free Software Foundation; either
 version 2 of the License, or (at your option) any later version.

 This library is distributed in the hope that it will be useful,
 but WITHOUT ANY WARRANTY; without even the implied warranty of
 MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
 Lesser General Public License for more details.

 You should have received a copy of the GNU Lesser General
 Public License along with this library; if not, write to the
 Free Software Foundation, Inc., 59 Temple Place, Suite 330,
 Boston, MA 02111-1307, USA.

 Author: David Zeuthen <davidz@redhat.com>
-->

<node name="/" xmlns:doc="http://www.freedesktop.org/dbus/1.0/doc.dtd">

  <!-- ********************************************************************** -->

  <!--
      org.gnome.OnlineAccounts.Account:

      The base account interface.
  -->
  <interface name="org.gnome.OnlineAccounts.Account">
    <!-- Type: The type of the account.
         Known values include
         <variablelist>
         <varlistentry><term>google</term><listitem><para>The account is a Google Account. See the #org.gnome.OnlineAccounts.GoogleAccount D-Bus interface for more details.</para></listitem></varlistentry>
         </variablelist>
    -->
    <property name="Type" type="s" access="read">
      <!-- Avoid getting renamed to type_ because we clash with the GType get_type() function -->
      <annotation name="org.gtk.GDBus.C.Name" value="AccountType"/>
    </property>

    <!-- Id: An identifier for this account.
         This identifier cannot be changed and should never be
         displayed in any user interface.
      -->
    <property name="Id" type="s" access="read"/>

    <!-- AttentionNeeded: Set to TRUE if the account is in need of attention.

         This is used when a human operator is needed to service the
         account (e.g. for authentication and/or authorization).
      -->
    <property name="AttentionNeeded" type="b" access="read"/>

    <!-- Name: A human-readable description for the account.

         This property may change if the user e.g. renames the
         account.
      -->
    <property name="Name" type="s" access="read"/>

    <!-- SupportedSources: A list of possible sources that this account can be used for.

         Known sources include:
         <variablelist>
         <varlistentry><term>messages</term><listitem><para>Used for email and similar communication media.</para></listitem></varlistentry>
         <varlistentry><term>events</term><listitem><para>Used for calendar appointments and upcoming events.</para></listitem></varlistentry>
         <varlistentry><term>chat</term><listitem><para>E.g. instant messaging.</para></listitem></varlistentry>
         <varlistentry><term>contacts</term><listitem><para>Used for contacts.</para></listitem></varlistentry>
         </variablelist>

         This property normally doesn't change. It can change in e.g. a newer software version.
    -->
    <property name="SupportedSources" type="as" access="read"/>

    <!-- EnabledSources: The user-configured sources this account should be used for.

         This property may change if the user e.g. reconfigures the account.

         Known sources are listed in the documentation for the #org.gnome.OnlineAccounts.Account:SupportedSources property.
    -->
    <property name="EnabledSources" type="as" access="readwrite"/>

    <!-- SourceNames:

         A property that contains the "branded" name that should be displayed in the UI rather than a generic string such as "Chat" or "E-Mail". For example, for a Google Account, this property may contain the following
         <variablelist>
         <varlistentry><term>messages</term><listitem><para>GMail</para></listitem></varlistentry>
         <varlistentry><term>events</term><listitem><para>Calendar</para></listitem></varlistentry>
         <varlistentry><term>chat</term><listitem><para>Talk</para></listitem></varlistentry>
         <varlistentry><term>contacts</term><listitem><para>Contacts</para></listitem></varlistentry>
         </variablelist>

         This property normally doesn't change. It can change in e.g. a newer software version.
    -->
    <property name="SourceNames" type="a{ss}" access="read"/>

    <!-- SetName: Sets the name. -->
    <method name="SetName">
      <arg name="name" type="s" direction="in"/>
    </method>

    <!-- ClearAttentionNeeded: Clears the #org.gnome.OnlineAccounts.Account:AttentionNeeded property -->
    <method name="ClearAttentionNeeded"/>

  </interface>

  <!--
      org.gnome.OnlineAccounts.GoogleAccount:

      A Google Account, either a <emphasis>hosted</emphasis> account
      (for example <email>user@mycollege.edu</email>) or a regular
      account (for example <email>user@gmail.com</email>).

      Objects implementing this interface also implement the
      #org.gnome.OnlineAccounts.Account and #org.gnome.OnlineAccounts.AccessTokenBased interfaces.

      When creating this kind of account via the
      org.gnome.OnlineAccounts.Manager.AddAccount() method, you need
      to include an <literal>EmailAddress</literal> element in
      the @details parameter.
  -->
  <interface name="org.gnome.OnlineAccounts.GoogleAccount">
    <!-- EmailAddress: The email address identifying the account.

         This value cannot be changed once set.
      -->
    <property name="EmailAddress" type="s" access="read"/>
  </interface>

  <!--
      org.gnome.OnlineAccounts.AccessTokenBased:

      An account object implements this interface if it is based on
      access tokens such as e.g. <ulink
      url="http://en.wikipedia.org/wiki/OAuth">OAuth</ulink>.
  -->
  <interface name="org.gnome.OnlineAccounts.AccessTokenBased">
    <!--
      GetAccessToken:
      @access_token: The access token that can be used to access online services.
      @expires_in: The duration that the returned token is valid for, in seconds or 0 if unknown.

      Use this method to obtains an access token to access services
      for the account. Because networking is involved, this method may
      take a very long time to complete.

      If this method fails because the token service indicates that
      authentication is needed, the
      #org.gnome.OnlineAccounts.Account:AttentionNeeded property is
      set to TRUE.
    -->
    <method name="GetAccessToken">
      <arg name="access_token" type="s" direction="out"/>
      <arg name="expires_in" type="i" direction="out"/>
    </method>
  </interface>

  <!--
      org.gnome.OnlineAccounts.Manager:

      An interface used for managing accounts.
  -->
  <interface name="org.gnome.OnlineAccounts.Manager">

    <!--
        AddAccount:
        @type: The type of account to create. See the #org.gnome.OnlineAccounts:Type property for known types.
        @name: The human readable name of the account (cf. the #org.gnome.OnlineAccounts:Name property).
        @details: Details about the account. See each interface
        (e.g. #org.gnome.OnlineAccounts.GoogleAccount) for details of
        what other elements to include.
        @account_object_path: The object path of the created account.

        Creates a new account. Note that this does not create an
        account at the remote service.
    -->
    <method name="AddAccount">
      <arg name="type" type="s" direction="in"/>
      <arg name="name" type="s" direction="in"/>
      <arg name="details" type="a{ss}" direction="in"/>
      <arg name="account_object_path" type="o" direction="out"/>
    </method>

    <!--
        RemoveAccount:
        @account_object_path: The object path of account to delete.

        Deletes an account. Note that this does not delete the account
        at the remote service.
    -->
    <method name="RemoveAccount">
      <arg name="account_object_path" type="o" direction="in"/>
    </method>
  </interface>

</node>
